@command{Syslogd} is a system service that provides error logging facility.
Messages are read from the UNIX domain socket @file{/dev/log},
from an Internet domain socket specified in @file{/etc/services}, and from
the special device @file{/dev/klog} (to read kernel messages).
@command{Syslogd} creates the file @file{/var/run/syslog.pid}, and stores its process id
there.  This can be used to kill or reconfigure @command{syslogd}.
The message sent to syslogd should consist of a single line.
The message can contain a priority code, which should be a preceding
decimal number in angle braces, for example, @code{<5.>} This priority
code should map into the priorities defined in the include file
@code{<sys/syslog.h>}.

@section Invoking

The options are as follows :

@table @samp

@item -f @var{FILE}
@itemx --rcfile=@var{FILE}
@opindex -f
@opindex --rcfile
Override configuration (default: file @file{/etc/syslog.conf}).

@item --pidfile=@var{FILE}
@opindex --pidfile
Override pidfile (default: @file{/var/run/syslogd.pid}).

@item -n
@itemx --no-detach
@opindex -n
@opindex --no-detach
Do not enter daemon mode.

@item -d
@itemx --debug
@opindex -d
@opindex --debug
Print debug information (implies -n).

@item -p @var{FILE}
@item --socket=@var{FILE}
@opindex -p
@opindex --socket
Override default unix domain socket @file{/dev/log}.
@item -a @var{SOCKET}
Add unix socket to listen. An unlimited number of sockets is allowed.

@item -r
@itemx --inet
@opindex -r
@opindex --inet
Receive remote messages via internet domain socket.

@item --no-unixaf
@opindex --no-unixaf
Do not listen on unix domain sockets (overrides -a and -p).

@item --no-klog
@opindex --no-klog
Do not listen to kernel log device @file{/dev/klog}.

@item --no-forward
@opindex --no-forward
Do not forward any messages (overrides -h).

@item -h
@item --hop
@opindex -h
@opindex --hop
Forward messages from remote hosts.

@item -m
@item --mark=@var{INTVL}
@opindex -m
@opindex --mark
Specify timestamp interval in logs (0 for no timestamps).

@item -l @var{HOSTLIST}
@opindex -l
Log hosts in @var{HOSTLIST} by their hostname. Multiple lists are allowed.

@item -s @var{DOMAINLIST}
@opindex -s
List of domains which should be stripped from the FQDN of
hosts before logging their name. Multiple lists are allowed.

@end table

@section Configuration file

@command {Syslogd} reads its configuration file when it starts up and
whenever it receives a hangup signal. The @file{syslog.conf} file is the
configuration file for the @command{syslogd} program.  It consists of
lines with two fields: the @emph{selector} field which specifies the types
of messages and priorities to which the line applies, and an @emph{action}
field which specifies the action to be taken if a message @command{syslogd}
receives matches the selection criteria.  The @emph{selector} field is
separated from the action field by one or more tab or space characters. A
rule can be splitted in several lines if all lines except the last are
terminated with a backslash \.

The Selectors function are encoded as a facility, a period (``.''), and a
level, with no intervening white-space.  Both the facility and the level
are case insensitive.

The facility describes the part of the system generating the message, and
is one of the following keywords: auth, authpriv, cron, daemon, kern,
lpr, mail, mark, news, syslog, user, uucp and local0 through local7.
These keywords (with the exception of mark) correspond to the similar
``LOG_'' values specified to the openlog(3) and syslog(3) library routines.

The level describes the severity of the message, and is a keyword from
the following ordered list (higher to lower): emerg, alert, crit, err,
warning, notice and debug.  These keywords correspond to the similar
(LOG_) values specified to the syslog library routine.

See syslog(3) for a further descriptions of both the facility and level
keywords and their significance.

If a received message matches the specified facility and is of the specified
level (or a higher level), the action specified in the action field
will be taken.

Multiple selectors may be specified for a single action by separating
them with semicolon (``;'') characters.  It is important to note, however,
that each selector can modify the ones preceding it.

Multiple facilities may be specified for a single level by separating
them with comma (``,'') characters.

An asterisk (``*'') can be used to specify all facilities or all levels.

By default, a level applies to all messages with the same or higher
level. The equal (``='') character can be prepended to a level to restrict
this line of the configuration file to messages with the very same
level.
An exclamation mark (``!'') prepended to a level or the asterisk means
that this line of the configuration file does not apply to the specified
level (and higher ones). In conjunction with the equal sign, you can ex-
clude single levels as well.

The special facility @emph{mark} receives a message at priority ``info'' ev-
ery 20 minutes (see syslogd(8)).  This is not enabled by a facility field
containing an asterisk.

The special level ``none'' disables a particular facility.


The action field of each line specifies the action to be taken when the
selector field selects a message.  There are five forms:

     o   A pathname (beginning with a leading slash).  Selected messages are
         appended to the file.

         You may prepend a minus (``-'') to the path to omit syncing the file
         after each message log. This can cause data loss at system crashes,
         but increases performance for programs which use logging extensively.

     o   A named pipe (fifo), beginning with a vertical bar (``|'') followed
         by a pathname. The pipe must be created with mkfifo(8) before syslogd
         reads its configuration file.  This feature is especially useful fo
         debugging.

     o   A hostname (preceded by an at (``@'') sign).  Selected messages are
         forwarded to the syslogd program on the named host.

     o   A comma separated list of users.  Selected messages are written to
         those users if they are logged in.

     o   An asterisk.  Selected messages are written to all logged-in users.

     Blank lines and lines whose first non-blank character is a hash (``#'')
     character are ignored.

@example
     A configuration file might appear as follows:

     # Log all kernel messages, authentication messages of
     # level notice or higher and anything of level err or
     # higher to the console.
     # Don't log private authentication messages!
     *.err;kern.*;auth.notice;authpriv.none  /dev/console

     # Log anything (except mail) of level info or higher.
     # Don't log private authentication messages!
     *.info;mail.none;authpriv.none          /var/log/messages

     # The authpriv file has restricted access.
     authpriv.*                              /var/log/secure

     # Log all the mail messages in one place.
     mail.*                                  /var/log/maillog

     # Everybody gets emergency messages, plus log them on another
     # machine.
     *.emerg                                 *
     *.emerg                                 @@arpa.berkeley.edu

     # Root and Eric get alert and higher messages.
     *.alert                                 root,eric

     # Save mail and news errors of level err and higher in a
     # special file.
     uucp,news.crit                          /var/log/spoolerr
@end example

@comment @section BUGS

The effects of multiple selectors are sometimes not intuitive.  For example
``mail.crit,*.err'' will select ``mail'' facility messages at the
level of ``err'' or higher, not at the level of ``crit'' or higher.

